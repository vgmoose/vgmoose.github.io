<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/layout/style.css" />
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css' />
    <title>Day 10 - Snapshot Restore Aftermath</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Day 10 - Snapshot Restore Aftermath" />
     <meta property="og:type" content="article" /> 
    <!-- entry_group <meta property="og:type" content="website" /> entry_group -->
    <meta property="og:url" content="$url" />
    <meta property="og:description" content="So today I thought I'd through caution to the wind and just restore one of the daily snapshots that I had lying around from the cron job. This turned out to be not such a great idea... Despite being in charge of reviewing the documentation, it was not so obvious to me that upon merging one of the snapshots from my \"Time Machine\" the other ones would be de-linked as snapshots, and simply exist as thin volumes within the pool. This is pretty upsetting, as the inability to merge the snapshots that ..." />
    <meta property="og:image" content="posts/23365411%20-%20Day%2010%20-%20Snapshot%20Restore%20Aftermath.post/img_20140604_162037.jpg" />
    <meta name="theme-color" content="#f8bd01">
</head>

<div id="all">
    <div id="banner">
        <img src="/layout/logo.png" alt="Flygon image, artwork by ikra (katacoly)" id="logo" />
        <span>vgmoose.dev</span>
    </div>
    <div id="nav">
        <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/projects/">Projects</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li class="opt-nav"><a href="/archive/">Archive</a></li>
            <li><a href="/search/">Search</a></li>
            <li class="opt-nav"><a href="/socials/">Socials</a></li>
            <div class="nav-socials">
                <a href="https://github.com/vgmoose" target="_blank" title="GitHub"><i class="bi bi-github"></i></a>
                <a href="https://bsky.app/profile/vgmoose.dev" target="_blank" title="Bluesky"><i class="bi bi-bluesky"></i></a>
                <a href="https://youtube.com/vgmoose" target="_blank" title="YouTube"><i class="bi bi-youtube"></i></a>
                <a href="https://ko-fi.com/vgmoose" target="_blank" title="Ko-fi"><i class="bi bi-kofi"></i></a>
            </div>
        </ul>
    </div>
    
    
    <div id="content">
        <h2>Day 10 - Snapshot Restore Aftermath</h2>
        <div class="post-meta">
            <span class="post-date">2014-06-04</span>
            <span class="post-tags">Tags: red hat, internship, lvm, snapshot, lvmthin</span>
        </div>
        <p>So today I thought I'd through caution to the wind and just restore one of the daily snapshots that I had lying around from the cron job. This turned out to be not such a great idea... Despite being in charge of reviewing the documentation, it was not so obvious to me that upon merging one of the snapshots from my "Time Machine" the other ones would be de-linked as snapshots, and simply exist as thin volumes within the pool. This is pretty upsetting, as the inability to merge the snapshots that I have diminishes their value... Or so I thought.</p>
<p>You see, as it turns out, and as I probably should have realized, merging thin snapshots isn't the only way to restore one of these snapshots. Since at a lower level device mapper is taking care of the bytes within the thin pool, I can simply rename the snapshot I want to restore's thin volume to my current one and swap them. As I've been backing up my home directory, I'll obviously have to do this either as root or from another volume, but such was the case with merging as well.</p>
<pre class="highlight"><code>lvrename vg/cur_home old_home
lvrename vg/snap_to_restore cur_home</code></pre>


<p>In addition to that, the skip automatic activation flags should be set up accordingly, and at the very least the new home volume should have it turned off. This is that weird <code>-k</code> stuff.</p>
<pre class="highlight"><code>lvchange -kn vg/cur_home
lvchange -ky vg/old_home</code></pre>


<p>And then on the next reboot all was well... With the exception of <code>lvs</code> looking a bit messier now (as you can tell when a point has been restored from by looking at the origins).</p>
<p><img alt="Blog Image" src="/posts/23365411 - Day 10 - Snapshot Restore Aftermath.post/IMG_20140604_162029.jpg"></p>
<p>In other news, I've received another monitor. Still only one mouse and keyboard, but swapping those isn't nearly as tedious as swapping monitors, so that's pretty useful. Above is my current setup, and below are more pics.</p>
<p><img alt="Blog Image" src="/posts/23365411 - Day 10 - Snapshot Restore Aftermath.post/IMG_20140604_162037.jpg"></p>
<p>Here's desk space here if I ever need to write anything down. I was considering splaying some papers there to make it look like it was in use, but that would be weird.</p>
<p><img alt="Blog Image" src="/posts/23365411 - Day 10 - Snapshot Restore Aftermath.post/IMG_20140604_162042.jpg"></p>
<p>I'd move the other one to the floor, but until I get an extension cord moving the first one isn't much of an option. This bottom one is the one with the removable hard disks, so in retrospect perhaps I should have left it on the desk instead of having to lean down to remove a disk.</p>
    </div>
    
    
    <!-- entry_group
    <div id="content">
        $entry_group
    </div>
    entry_group -->
    
    <!-- search_group
    <div id="content">
        <h2>Search vgmoose.dev</h2>
        <p class="hideme">Search is loading...</p>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script>lookup = $search_lookup;</script>
        <script>vocab = $search_vocab;</script>
        <script>postmeta = $search_postmeta;</script>
        <script src="/js/search.js"></script>
        <p>Enter a search term below to view all blog articles that match it:</p>
        <input type="text" id="search_input" placeholder="Enter search terms here"></input><button id="go_search">Search</button>
        <div id="results"></div>
        <p>Also, see <a href="https://vgmoose.dev/blog/implementing-a-static-blog-search-clientside-in-js-6629164446/">this post</a> for info on how this search works!</p>
    </div>
    search_group -->
    
<div style="clear: both"></div>
<br /><br />
    
    <br>
    
    <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'vgmoose';
            var disqus_identifier = 9847859423;

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    
    <div id="footer">
		<div class="left">
            <a href="/blog/privacy-policy-8856490363/">Privacy Policy</a>
            <div class="mobile-footers">
                &nbsp;|&nbsp; <a href="/archive/">Archive</a>
                &nbsp;|&nbsp; <a href="/socials/">Socials</a>
            </div>
        </div>
		<div class="right">&copy; 2005-2025 VGMoose</div>
		<div style="clear: both"></div>
	</div>
</div>
